<p>plans works!</p>
<table id="myTable" border="1" class="cal" *ngIf = "vacData" 
  style="border-collapse: collapse; 
background-color:yellow" 
cellpadding="2">
<tr>
  <td *ngFor = "let d of calDates">
    {{ d.getDate()}}
  </td>
</tr>
<tr *ngFor = "let item of vacData | keyvalue">
  <td *ngFor='let loop3 of counter(item.value[0].daysTillStartDate) ;let ip= index'> </td>
  <td [attr.colspan] = 'item.value[0].vacLength'>{{ item.key}}</td>

  <ng-container *ngIf = 'item.value[1]'> 
   <td *ngFor= 'let loop4 of counter(item.value[1].daysTillStartDate - item.value[0].daysTillStartDate  -  item.value[0].vacLength ) ;let jp= index'    > 44</td>
   <td [attr.colspan] = 'item.value[1].vacLength'>  {{ item.key}}  </td>
  </ng-container> 

  <ng-container  *ngIf = '!item.value[1]'  > 
    <td *ngFor = "let lp0 of counter(61 - item.value[0].daysTillStartDate -  item.value[0].vacLength )"> a</td>
  </ng-container>
  
  <ng-container *ngIf = 'item.value[2]'> 
    <td *ngFor= 'let loop5 of counter( item.value[1].daysTillStartDate - item.value[0].daysTillStartDate 
                 ) ;let kp= index'    >    w</td>
    <td [attr.colspan] = 'item.value[2].vacLength'>{{ item.key}}</td>
   </ng-container> 
   <ng-container *ngIf = '!item.value[3] && item.value[2]'>
   <td  *ngFor='let l4 of counter(61 -  item.value[2].daysTillStartDate 
                           - item.value[0].vacLength - item.value[1].vacLength  )'> xx </td>
   </ng-container>
   
   <ng-container *ngIf = '!item.value[2] && item.value[1]'>
     <td *ngFor='let l3 of counter( myFunction(item.value[1])); let i = index'[attr.data-index]="i"> jj
      
    </td>
   </ng-container>
   <ng-container *ngIf = 'item.value[3]'> 
    <td *ngFor= 'let loop6 of counter(item.value[3].daysTillStartDate - item.value[2].daysTillStartDate) ;let l= index'    > vv</td>
    <td [attr.colspan] = 'item.value[3].vacLength'>test </td>
   </ng-container> 
</tr>

</table>
